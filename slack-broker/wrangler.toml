name = "slack-broker"
main = "src/index.ts"
compatibility_date = "2024-12-30"

# KV Namespaces — create with:
#   wrangler kv namespace create WORKSPACE_ROUTING
#   wrangler kv namespace create OAUTH_STATE
[[kv_namespaces]]
binding = "WORKSPACE_ROUTING"
id = "PLACEHOLDER_WORKSPACE_ROUTING_ID"

[[kv_namespaces]]
binding = "OAUTH_STATE"
id = "PLACEHOLDER_OAUTH_STATE_ID"

# Secrets — set with:
#   wrangler secret put BROKER_PRIVATE_KEY
#   wrangler secret put SLACK_CLIENT_ID
#   wrangler secret put SLACK_CLIENT_SECRET
#   wrangler secret put SLACK_SIGNING_SECRET

# Dev overrides
[env.dev]
name = "slack-broker-dev"

[[env.dev.kv_namespaces]]
binding = "WORKSPACE_ROUTING"
id = "PLACEHOLDER_DEV_WORKSPACE_ROUTING_ID"

[[env.dev.kv_namespaces]]
binding = "OAUTH_STATE"
id = "PLACEHOLDER_DEV_OAUTH_STATE_ID"
