# Baudbot agent configuration schema
# See CONFIGURATION.md for details on each variable.
#
# Secrets live at ~/.config/.env (600 perms, never committed).
# This schema is deployed to ~/.config/.env.schema alongside the .env file.
#
# @defaultSensitive=true
# @defaultRequired=false
# ---

# ── LLM Access ───────────────────────────────────────────────────────────────
# Set at least one. Multiple can coexist — switch models at runtime.

# Anthropic API key (Claude models)
# @type=string(startsWith=sk-ant-)
# @docs(https://console.anthropic.com/settings/keys)
ANTHROPIC_API_KEY=

# OpenAI API key (GPT, o-series models)
# @type=string(startsWith=sk-)
# @docs(https://platform.openai.com/api-keys)
OPENAI_API_KEY=

# Google Gemini API key
# @type=string
# @docs(https://aistudio.google.com/apikey)
GEMINI_API_KEY=

# OpenCode Zen API key (multi-provider router)
# @type=string
# @docs(https://opencode.ai)
OPENCODE_ZEN_API_KEY=

# ── Slack ────────────────────────────────────────────────────────────────────

# Slack bot OAuth token (required for direct Socket Mode, optional in broker mode)
# @type=string(startsWith=xoxb-)
# @docs("Create a Slack app", https://api.slack.com/apps)
SLACK_BOT_TOKEN=

# Slack app-level token (Socket Mode; optional in broker mode)
# @type=string(startsWith=xapp-)
SLACK_APP_TOKEN=

# Comma-separated Slack user IDs allowed to interact with the agent
# Bridge refuses to start without at least one user ID.
# @required @sensitive=false @type=string
# @example="U01ABCDEF,U02GHIJKL"
SLACK_ALLOWED_USERS=

# ── Experimental Feature Flag ───────────────────────────────────────────────

# Enable experimental integrations (currently required for email tooling)
# @sensitive=false @type=number
BAUDBOT_EXPERIMENTAL=0

# ── Email Monitor (experimental-only) ───────────────────────────────────────

# AgentMail API key (only used when BAUDBOT_EXPERIMENTAL=1)
# @type=string
# @docs(https://app.agentmail.to)
AGENTMAIL_API_KEY=

# Agent's monitored email address (only used when BAUDBOT_EXPERIMENTAL=1)
# @sensitive=false @type=email
BAUDBOT_EMAIL=

# Shared secret for email sender authentication (only used when BAUDBOT_EXPERIMENTAL=1)
# @type=string
BAUDBOT_SECRET=

# Comma-separated sender email allowlist (only used when BAUDBOT_EXPERIMENTAL=1)
# @sensitive=false @type=string
# @example="you@example.com,teammate@example.com"
BAUDBOT_ALLOWED_EMAILS=

# ── Sentry (optional) ───────────────────────────────────────────────────────

# Sentry API bearer token
# @type=string
# @docs(https://sentry.io/settings/account/api/auth-tokens/)
SENTRY_AUTH_TOKEN=

# Sentry organization slug
# @sensitive=false @type=string
SENTRY_ORG=

# Slack channel ID for Sentry alerts
# @sensitive=false @type=string(startsWith=C)
SENTRY_CHANNEL_ID=

# ── Slack Channels (optional) ───────────────────────────────────────────────

# Additional monitored channel (responds to all messages, not just @mentions)
# @sensitive=false @type=string(startsWith=C)
SLACK_CHANNEL_ID=

# ── Kernel (optional) ───────────────────────────────────────────────────────

# Kernel cloud browser API key
# @type=string
# @docs(https://kernel.computer)
KERNEL_API_KEY=

# ── Slack Broker Registration (optional) ─────────────────────────────────────

# Slack broker base URL
# @sensitive=false @type=url
SLACK_BROKER_URL=

# Slack workspace/team ID registered with broker
# @sensitive=false @type=string(startsWith=T)
SLACK_BROKER_WORKSPACE_ID=

# Server X25519 private key (base64)
# @type=string
SLACK_BROKER_SERVER_PRIVATE_KEY=

# Server X25519 public key (base64)
# @sensitive=false @type=string
SLACK_BROKER_SERVER_PUBLIC_KEY=

# Server Ed25519 private signing key (base64)
# @type=string
SLACK_BROKER_SERVER_SIGNING_PRIVATE_KEY=

# Server Ed25519 public signing key (base64)
# @sensitive=false @type=string
SLACK_BROKER_SERVER_SIGNING_PUBLIC_KEY=

# Broker X25519 public key (base64)
# @sensitive=false @type=string
SLACK_BROKER_PUBLIC_KEY=

# Broker Ed25519 public signing key (base64)
# @sensitive=false @type=string
SLACK_BROKER_SIGNING_PUBLIC_KEY=

# Broker pull cadence in milliseconds (default: 3000)
# @sensitive=false @type=number
SLACK_BROKER_POLL_INTERVAL_MS=3000

# Max messages to lease per inbox pull request (default: 10)
# @sensitive=false @type=number
SLACK_BROKER_MAX_MESSAGES=10

# Dedupe cache TTL in milliseconds (default: 20 minutes)
# @sensitive=false @type=number
SLACK_BROKER_DEDUPE_TTL_MS=1200000

# ── Linear (optional) ────────────────────────────────────────────────────────

# Linear API key (personal or OAuth token)
# @type=string
# @docs(https://linear.app/settings/api)
LINEAR_API_KEY=

# ── Tool Guard ───────────────────────────────────────────────────────────────

# Unix username of the agent
# @sensitive=false @type=string
BAUDBOT_AGENT_USER=baudbot_agent

# Agent's home directory
# @sensitive=false @type=string
BAUDBOT_AGENT_HOME=/home/baudbot_agent

# Path to admin-owned source repo (enables source repo write protection)
# @sensitive=false @type=string
BAUDBOT_SOURCE_DIR=

# ── Bridge ───────────────────────────────────────────────────────────────────

# Local HTTP API port for outbound Slack messages
# @sensitive=false @type=port
BRIDGE_API_PORT=7890

# Target pi session ID (auto-detects control-agent if unset)
# @sensitive=false @type=string
PI_SESSION_ID=
